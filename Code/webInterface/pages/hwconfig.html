{% extends "../layout.html" %}

{% block top_navigation %}
{% run use_component("topNavigation", "hwconfig") %}
{% endblock %}

{% block content %}
<!-- PRE2021,
        MIAMI2021,
        MALDIVES2021,
        M54149E,
        M54173,
        M54154,
        M54144,
        M54138,
        M54123 -->

<h2>Hardware:</h2>
<section onclick="setPins()">
    <p>Select your CIO (pump) model:</p>
    <input type="radio" id="cio_0" name="cio_model" value="0" checked="checked">
    <label for="cio_pre2021">6 wire, pre 2021 (air)</label><br>
    <input type="radio" id="cio_1" name="cio_model" value="1">
    <label for="cio_2021">6 wire, 2021 (air)</label><br>
    <input type="radio" id="cio_2" name="cio_model" value="2">
    <label for="cio_2021hjt">6 wire, 2021 (air+jet)</label><br>
    <input type="radio" id="cio_3" name="cio_model" value="3">
    <label for="cio_54149e">6 wire, 54149E (air)</label><br>
    <input type="radio" id="cio_4" name="cio_model" value="4">
    <label for="cio_54173">4 wire, 54173 (air+jet)</label><br>
    <input type="radio" id="cio_5" name="cio_model" value="5">
    <label for="cio_54154">4 wire, 54154 (air)</label><br>
    <input type="radio" id="cio_6" name="cio_model" value="6">
    <label for="cio_54144">4 wire, 54144 (jet)</label><br>
    <input type="radio" id="cio_7" name="cio_model" value="7">
    <label for="cio_54138">4 wire, 54138 (air+jet)</label><br>
    <input type="radio" id="cio_8" name="cio_model" value="8">
    <label for="cio_54123">4 wire, 54123 (air)</label><br>
</section>

<section onclick="setPins()">
    <p>Select your DSP (display) model:
        <span
            data-text="In theory we should be able to combine any CIO with any DSP. Not tested but really cool if it actually works :-)"
            class="tooltip left">?</span>
    </p>
    <input type="radio" id="dsp_0" name="dsp_model" value="0" checked="checked">
    <label for="dsp_pre2021">6 wire, pre 2021 (air)</label><br>
    <input type="radio" id="dsp_1" name="dsp_model" value="1">
    <label for="dsp_2021">6 wire, 2021 (air)</label><br>
    <input type="radio" id="dsp_2" name="dsp_model" value="2">
    <label for="dsp_2021hjt">6 wire, 2021 (air+jet)</label><br>
    <input type="radio" id="dsp_3" name="dsp_model" value="3">
    <label for="dsp_54149e">6 wire, 54149E (air)</label><br>

    <input type="radio" id="dsp_4" name="dsp_model" value="4">
    <label for="dsp_54173">4 wire, 54173 (air+jet)</label><br>
    <input type="radio" id="dsp_5" name="dsp_model" value="5">
    <label for="dsp_54154">4 wire, 54154 (air)</label><br>
    <input type="radio" id="dsp_6" name="dsp_model" value="6">
    <label for="dsp_54144">4 wire, 54144 (jet)</label><br>
    <input type="radio" id="dsp_7" name="dsp_model" value="7">
    <label for="dsp_54138">4 wire, 54138 (air+jet)</label><br>
    <input type="radio" id="dsp_8" name="dsp_model" value="8">
    <label for="dsp_54123">4 wire, 54123 (air)</label><br>
</section>

<section onclick="setPins()">
    <p>Select your PCB:</p>
    <input type="radio" id="v1" name="pcb" value="v1" checked="checked">
    <label for="v1">V1</label><br>
    <input type="radio" id="v2" name="pcb" value="v2">
    <label for="v2">V2</label><br>
    <input type="radio" id="v2b" name="pcb" value="v2b">
    <label for="v2b">V2B</label>
    <span data-text="Same PCB as V2 but with wires moved to other pins for better compatibility for some pumps"
        class="tooltip">?</span><br>
    <input type="radio" id="custom" name="pcb" value="custom">
    <label for="custom">Custom</label>
    <span data-text="If using your own board - fill in the pinout below! Leave fields empty if not used."
        class="tooltip">?</span><br>
</section>

<section>
    <p>Pinout <span data-text="D0-D8 as labeled on the ESP, but without the 'D'. The ESP will convert to GPIO numbers."
            class="tooltip">?</span></p>
    </p>
    <table>
        <tr>
            <td>CIO</td>
            <td>
                data/td/rx<input type="text" id="pin1" maxlength="2" style="width:30px">
                clk/tx<input type="text" id="pin2" maxlength="2" style="width:30px">
                cs/ld<input type="text" id="pin3" maxlength="2" style="width:30px">
            </td>
        </tr>
        <tr>
            <td>DSP</td>
            <td>
                data/td/tx<input type="text" id="pin4" maxlength="2" style="width:30px">
                clk/rx<input type="text" id="pin5" maxlength="2" style="width:30px">
                cs/ld<input type="text" id="pin6" maxlength="2" style="width:30px">
                audio<input type="text" id="pin7" maxlength="2" style="width:30px">
            </td>
        </tr>
    </table>
</section>

<section>
    <p>Ambient "One Wire Temperature Sensor"<span
            data-text="Requires a DS18B20 sensor to be connected to the pin labeled 'Sensor Pin'. The sensor will update the 'Ambient Temperature' periodically."
            class="tooltip above">?</span></p>
    <table>
        <tr>
            <td>Enable <input type="checkbox" id="hasTempSensor" name="hasTempSensor" value="checked"></td>
            <td>Sensor Pin (Dx)<span
                    data-text="D0-D8 as labeled on the ESP, but without the 'D'. The ESP will convert to GPIO numbers."
                    class="tooltip above">?</span> <input type="text" id="pin8" maxlength="2" style="width:30px"></td>
        </tr>
    </table>
</section>

<section>
    <p>Power levels (in Watts) <span data-text="Customize power levels for different running modes."
            class="tooltip above">?</span></p>
    <table>
        <tr>
            <td colspan="5">Override <input type="checkbox" id="pwr_override" onclick="onOverrideClick()"></td>
        </tr>
        <tr>
            <td style="text-align:right">Heat stage 1<input type="text" id="pwr_heater_stage1" maxlength="4"
                    style="width:30px" inputmode="numeric" pattern="[0-9]{1,4}" disabled="disabled"></td>
            <td style="text-align:right">Heat stage 2<input type="text" id="pwr_heater_stage2" maxlength="4"
                    style="width:30px" inputmode="numeric" pattern="[0-9]{1,4}" disabled="disabled"></td>
            <td style="text-align:right">Pump <input type="text" id="pwr_pump" maxlength="4" style="width:30px"
                    inputmode="numeric" pattern="[0-9]{1,4}" disabled="disabled"></td>
        </tr>
        <tr>
            <td style="text-align:right">Idle <input type="text" id="pwr_idle" maxlength="4" style="width:30px"
                    inputmode="numeric" pattern="[0-9]{1,4}" disabled="disabled"></td>
            <td style="text-align:right">Air <input type="text" id="pwr_air" maxlength="4" style="width:30px"
                    inputmode="numeric" pattern="[0-9]{1,4}" disabled="disabled"></td>
            <td style="text-align:right">Jets <input type="text" id="pwr_jet" maxlength="4" style="width:30px"
                    inputmode="numeric" pattern="[0-9]{1,4}" disabled="disabled"></td>
        </tr>
    </table>
</section>

<section>
    <table>
        <tr>
            <td colspan="2" style="text-align:center">
                <button id="save" class="button" onclick="saveHardwareConfig()">save</button>
            </td>
        </tr>
    </table>
</section>
{% endblock %}

{% block embed_scripts %}
{% run embed_scripts('hwconfig') %}
{% endblock %}